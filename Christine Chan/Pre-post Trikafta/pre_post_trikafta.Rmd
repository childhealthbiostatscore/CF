---
title: "Pre/Post-Trikafta"
author: "Tim Vigers"
date: "`r format(Sys.time(), '%d %B %Y')`"
output:
  html_document:
    number_sections: yes
    toc: yes
    toc_depth: 2
    toc_float: yes
---

```{r setup, include=FALSE}
library(arsenal)
library(tidyverse)
library(readxl)
library(AGD)
library(knitr)
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_knit$set(root.dir = "/Volumes/PEDS/RI Biostatistics Core/Shared/Shared Projects/Vigers/CF/Christine Chan/Prepost Triakfta")
```

```{r chco data}
# CGM
chco_cgm = read.csv("./Data_Cleaned/chco_cgm.csv")
chco_cgm$timepoint = sub(".*_","",chco_cgm$subject_id)
chco_cgm$timepoint = factor(chco_cgm$timepoint)
levels(chco_cgm$timepoint) = c("Post","Post","Pre","Pre")
chco_cgm$subject_id = sub("_.*","",chco_cgm$subject_id)
colnames(chco_cgm)[which(colnames(chco_cgm) == "subject_id")] = "CFF.ID"
# Start dates
chco_dates = read.csv("./Data_Cleaned/chco_trikafta_dates.csv")
# Fix select dates
chco_dates$Earliest.Trikafta.Date.in.PortCF[chco_dates$MRN =="1053930"] = "12/1/2019"
chco_dates$Earliest.Trikafta.Date.in.PortCF[chco_dates$MRN =="1695512"] = "12/12/2019"
chco_dates$Earliest.Trikafta.Date.in.PortCF[chco_dates$MRN =="815274"] = "12/13/2019"
chco_dates$Earliest.Trikafta.Date.in.PortCF[chco_dates$MRN =="1078408"] = "3/9/2020"
chco_dates$Earliest.Trikafta.Date.in.PortCF[chco_dates$MRN =="899717"] = "2/14/2020"
# A1C and OGTT
chco_a1c = read.csv("./Data_Cleaned/chco_a1c_ogtt.csv")
chco_a1c$CFF.ID = as.character(chco_a1c$CFF.ID)
chco_pft = read.csv("./Data_Cleaned/chco_bmi_pft.csv")
# Put everything together
chco = left_join(chco_cgm,chco_a1c,by = "CFF.ID")
```